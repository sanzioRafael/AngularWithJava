<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	template="/layout/template.xhtml">
	
	<ui:define name="body" >
		<div data-ng-app="HelpApp">
			<div data-ng-controller="ChamadoController as controller">
				<h1>HELP APP</h1>
				<h5>{{controller.usuario}}</h5>
				
				<div style="border: 1px solid black" data-ng-show="controller.chamado">
					<label for="camadoId">ID: </label>
					<input id="chamadoId" type="number" data-ng-model="controller.chamado.id" disabled="disabled" />
					<br />
					
					<label for="assunto">Assunto: </label>
					<input id="assunto" type="text" data-ng-model="controller.chamado.assunto" />
					
					<label for="mensagem">Mensagem: </label>
					<textarea id="mensagem" rows="4" data-ng-model="controller.chamado.mensagem"></textarea>
					<br />
					
					<button type="button" data-ng-click="controller.salvar()">Salvar</button>
					<button type="button" data-ng-click="controller.chamado = undefined">Cancelar</button>
				</div>
				
				<div style="border: 1px solid black" data-ng-show="!controller.chamado">
					<button type="button" data-ng-click="controller.novo()">Novo Chamado</button>
					<br />
					<br />
					
					<table border="1">
						<tr>
							<th>ID</th>
							<th>Assunto</th>
							<th>Status</th>
							<th>Mensagem</th>
							<th>Opções</th>
						</tr>
						<tr data-ng-repeat="chamado in controller.chamados">
							<td>{{chamado.id}}</td>
							<td>{{chamado.assunto}}</td>
							<td>{{chamado.status}}</td>
							<td>{{chamado.mensagem}}</td>
							<td>
								<button type="button" data-ng-click="controller.alterar(chamado)">Alterar</button>
								<button type="button" data-ng-click="controller.deletar(chamado)">Excluir</button>
								<button type="button" data-ng-show="chamado.status !== 'FECHADO'" data-ng-click="controller.concluir(chamado)">Concluir</button>
							</td>
						</tr>
					</table>
				</div>
			</div>
			
		</div>
		
		<script src="../resources/js/angular.js"></script>
		<script src="../resources/angularController/help.js"></script>
	</ui:define>
	
</ui:composition>